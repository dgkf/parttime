<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="
    Datetimes and timestamps are invariably an imprecise notation, with any
    partial representation implying some amount of uncertainty. To handle this,
    parttime provides classes for embedding partial missingness as a central
    part of its datetime classes. This central feature allows for more ergonomic
    use of datetimes for challenging datetime computation, including
    calculations of overlapping date ranges, imputations, and more thoughtful
    handling of ambiguity that arises from uncertain time zones. This package was
    developed first and foremost with pharmaceutical applications in mind, but
    aims to be agnostic to application to accommodate general use cases just as
    conveniently.">
<title>Partial Datetime Handling â€¢ parttime</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Partial Datetime Handling">
<meta property="og:description" content="
    Datetimes and timestamps are invariably an imprecise notation, with any
    partial representation implying some amount of uncertainty. To handle this,
    parttime provides classes for embedding partial missingness as a central
    part of its datetime classes. This central feature allows for more ergonomic
    use of datetimes for challenging datetime computation, including
    calculations of overlapping date ranges, imputations, and more thoughtful
    handling of ambiguity that arises from uncertain time zones. This package was
    developed first and foremost with pharmaceutical applications in mind, but
    aims to be agnostic to application to accommodate general use cases just as
    conveniently.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">parttime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dgkf/parttime/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="parttime">parttime<a class="anchor" aria-label="anchor" href="#parttime"></a>
</h1></div>
<!-- badges: start -->

<p>A package for a partial datetime class and generics</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"dgkf/parttime"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h1>
<p>The <code>parttime</code> package aims to make uncertainty in datetimes a central feature by offering the <code>partial_time</code> datetime class.</p>
<p>This includes:</p>
<ul>
<li>parsing of a wider range of datetime string formats</li>
<li>internal representations that captures date component missingness</li>
<li>overloading of operators for comparison</li>
<li>mechanisms for resolving datetime uncertainty</li>
<li>imputation</li>
</ul>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><code>partial_time</code>s can be parsed from strings. Any missing data is not immediately imputed with a known date. Instead, its uncertainty is preserved as a central part of the <code>partial_time</code> class.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pttms</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/as.parttime.html">as.parttime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023"</span>, <span class="st">"2023-02"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can access the components of each datetime as though the <code>partial_time</code> is a matrix of datetime fields, or using <code>lubridate</code>-style accessors and assignment functions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pttms</span><span class="op">[</span>, <span class="st">"year"</span><span class="op">]</span></span>
<span><span class="co">##    2023 2023-02 </span></span>
<span><span class="co">##    2023    2023</span></span>
<span></span>
<span><span class="va">pttms</span><span class="op">[[</span><span class="fl">1</span>, <span class="st">"year"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">## [1] 2023</span></span>
<span></span>
<span><span class="fu"><a href="reference/parttime_access_and_assign.html">year</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">)</span>  <span class="co"># the first row are names of elements in a named numeric vector</span></span>
<span><span class="co">##    2023 2023-02 </span></span>
<span><span class="co">##    2023    2023</span></span>
<span></span>
<span><span class="fu"><a href="reference/parttime_access_and_assign.html">year</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">## [1] 2023</span></span>
<span></span>
<span><span class="fu"><a href="reference/parttime_access_and_assign.html">month</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">pttms</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[2]&gt; </span></span>
<span><span class="co">## [1] "2023"    "2023-03"</span></span>
<span></span>
<span><span class="fu"><a href="reference/parttime_access_and_assign.html">month</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">pttms</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[2]&gt; </span></span>
<span><span class="co">## [1] "2023-03" "2023-03"</span></span>
<span></span>
<span><span class="fu"><a href="reference/parttime_access_and_assign.html">month</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">pttms</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[2]&gt; </span></span>
<span><span class="co">## [1] "2023" "2023"</span></span></code></pre></div>
<p>Because <code>partial_time</code> objects may have uncertainty, comparison between times conveys this uncertainty. As a brief example, if we compare our dates from above we see that it is unclear whether one is greater-than the other.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pttms</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/as.parttime.html">as.parttime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023"</span>, <span class="st">"2023-02"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">pttms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">## [1] NA</span></span>
<span></span>
<span><span class="va">pttms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">## [1] NA</span></span></code></pre></div>
<p>This is because <code>"2022"</code> could be any date within the calendar year (and even outside the calendar year if the timezone is unknown!, see <a href="#partial-datetime-comparisons">below</a>). In this sense, there are two other modes of comparison - to determine whether a <code>partial_time</code> <em>possibly</em> or <em>definitely</em> satisfies a criteria.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/definitely.html">definitely</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">pttms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span></span>
<span><span class="fu"><a href="reference/possibly.html">possibly</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
<p>As well, a few helper functions are provided to perform imputation. All imputation functions are wrappers around <code>impute_time</code> with varying defaults for default timestamp and resolution to which imputation is performed.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/impute_time.html">impute_date_max</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>  <span class="co"># resolve date fields with maximum value</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[1]&gt; </span></span>
<span><span class="co">## [1] "2023-02-28"</span></span>
<span></span>
<span><span class="fu"><a href="reference/impute_time.html">impute_time</a></span><span class="op">(</span><span class="va">pttms</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"1999-06-05T04:03:02"</span><span class="op">)</span>  <span class="co"># arbitrary imputation</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[1]&gt; </span></span>
<span><span class="co">## [1] "2023-06-05 04:03:02"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-partial_time-class">The <code>partial_time</code> class<a class="anchor" aria-label="anchor" href="#the-partial_time-class"></a>
</h2>
<p><code>partial_time</code>s are like any other time, but may include <code>NA</code>s for some of their fields. For example, <code>"1999"</code> only tells us information about a year, the month, day, hour, etc. are still unknown. <code>partial_time</code>s should be used for situations when a specific point in time is intended, but exactly when it occurred is unknown.</p>
</div>
<div class="section level2">
<h2 id="the-timespan-class">The <code>timespan</code> class<a class="anchor" aria-label="anchor" href="#the-timespan-class"></a>
</h2>
<p>Similarly, a <code>timespan</code> class is offered, which is meant to represent a range of times, denoted by a starting and ending <code>partial_time</code>. Timespans might represent a range from the start to the end of a day, like a <code>partial_time</code>, but can also represent ranges where the start and end are partial times with different resolution.</p>
</div>
</div>
<div class="section level1">
<h1 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h1>
<div class="section level2">
<h2 id="parsing-incomplete-timestamps">Parsing Incomplete Timestamps<a class="anchor" aria-label="anchor" href="#parsing-incomplete-timestamps"></a>
</h2>
<p>Parse ISO8601 timestampes using the <code>parsedate</code> packageâ€™s parser, but retains information about missingness in the timestamp format.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iso8601_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="cn">NA</span>,</span>
<span>  <span class="st">"2001"</span>,</span>
<span>  <span class="st">"2002-01-01"</span>,</span>
<span>  <span class="st">"2004-245"</span>, <span class="co"># yearday</span></span>
<span>  <span class="st">"2005-W13"</span>,  <span class="co"># yearweek</span></span>
<span>  <span class="st">"2006-W02-5"</span>,  <span class="co"># yearweek + weekday</span></span>
<span>  <span class="st">"2007-10-01T08"</span>,</span>
<span>  <span class="st">"2008-09-20T08:35"</span>,</span>
<span>  <span class="st">"2009-08-12T08:35.048"</span>,  <span class="co"># fractional minute</span></span>
<span>  <span class="st">"2010-07-22T08:35:32"</span>,</span>
<span>  <span class="st">"2011-06-13T08:35:32.123"</span>,  <span class="co"># fractional second</span></span>
<span>  <span class="st">"2012-05-23T08:35:32.123Z"</span>,  <span class="co"># Zulu time</span></span>
<span>  <span class="st">"2013-04-14T08:35:32.123+05"</span>,  <span class="co"># time offset from GMT</span></span>
<span>  <span class="st">"2014-03-24T08:35:32.123+05:30"</span>,  <span class="co"># time offset with min from GMT</span></span>
<span>  <span class="st">"20150101T083532.123+0530"</span>  <span class="co"># condensed form</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/as.parttime.html">as.parttime</a></span><span class="op">(</span><span class="va">iso8601_dates</span><span class="op">)</span></span>
<span><span class="co">## Warning in warn_repr_data_loss(x, includes = "week", excludes = "weekday"): Date strings including week and excluding weekday can not be fully</span></span>
<span><span class="co">## represented. To avoid loss of datetime resolution, such partial dates</span></span>
<span><span class="co">## are best represented as timespans. See `?timespan`.</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[15]&gt; </span></span>
<span><span class="co">##  [1] NA                              "2001"                         </span></span>
<span><span class="co">##  [3] "2002-01-01"                    "2004-09-01"                   </span></span>
<span><span class="co">##  [5] "2005"                          "2006-01-12"                   </span></span>
<span><span class="co">##  [7] "2007-10-01 08"                 "2008-09-20 08:35"             </span></span>
<span><span class="co">##  [9] "2009-08-12 08:35:02.880"       "2010-07-22 08:35:32"          </span></span>
<span><span class="co">## [11] "2011-06-13 08:35:32.123"       "2012-05-23 08:35:32.123"      </span></span>
<span><span class="co">## [13] "2013-04-14 08:35:32.123+05:00" "2014-03-24 08:35:32.123+05:30"</span></span>
<span><span class="co">## [15] "2015-01-01 08:35:32.123+05:30"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="imputing-timestamps">Imputing Timestamps<a class="anchor" aria-label="anchor" href="#imputing-timestamps"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/impute_time.html">impute_time</a></span><span class="op">(</span><span class="st">"2019"</span>, <span class="st">"2000-01-02T03:04:05.006+07:30"</span><span class="op">)</span></span>
<span><span class="co">## &lt;partial_time&lt;YMDhms+tz&gt;[1]&gt; </span></span>
<span><span class="co">## [1] "2019-01-02 03:04:05.006"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="partial-datetime-comparisons">Partial Datetime Comparisons<a class="anchor" aria-label="anchor" href="#partial-datetime-comparisons"></a>
</h2>
<p>Partial timestamps include uncertainty, which means that there is often uncertainty when comparing between timestamps. To help resolve this uncertainty there are two helper functions, <code>possibly</code> and <code>definitely</code> resolving this uncertainty for when the windows of uncertainty overlap, or equal (to a given resolution).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>parttime.assume_tz_offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>  <span class="co"># assume GMT</span></span>
<span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>parttime.assume_tz_offset <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>  <span class="co"># don't assume a timezone</span></span>
<span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span></span>
<span><span class="co">## [1] NA</span></span>
<span></span>
<span><span class="fu"><a href="reference/possibly.html">possibly</a></span><span class="op">(</span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="reference/definitely.html">definitely</a></span><span class="op">(</span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre></div>
<p>Given uncertainty in timestamps, we canâ€™t be sure these are equal. In this situation, <code>==</code> will return <code>NA</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span></span>
<span><span class="co">## [1] NA</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>parttime.assume_tz_offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/definitely.html">definitely</a></span><span class="op">(</span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>parttime.assume_tz_offset <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/definitely.html">definitely</a></span><span class="op">(</span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="timespans">Timespans<a class="anchor" aria-label="anchor" href="#timespans"></a>
</h2>
<p>Cast a partial timeâ€™s missingness to a range of possible values</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/as.timespan.html">as.timespan</a></span><span class="op">(</span><span class="fu"><a href="reference/parttime.html">parttime</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## &lt;timespan[1]&gt;</span></span>
<span><span class="co">## [1] [2019 â€” 2020)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tidyverse-compatible-vctrs">Tidyverse Compatible <code>vctrs</code>
<a class="anchor" aria-label="anchor" href="#tidyverse-compatible-vctrs"></a>
</h2>
<p><code>tibble</code>-style formatting makes it easy to see which components of each <code>partial_time</code> are missing.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span>
<span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span>
<span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>dates <span class="op">=</span> <span class="va">iso8601_dates</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    parttimes <span class="op">=</span> <span class="fu"><a href="reference/as.parttime.html">as.parttime</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span>,</span>
<span>    imputed_times <span class="op">=</span> <span class="fu"><a href="reference/impute_time.html">impute_time_min</a></span><span class="op">(</span><span class="va">parttimes</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">## Warning: There was 1 warning in `mutate()`.</span></span>
<span><span class="co">## â„¹ In argument: `parttimes = as.parttime(dates)`.</span></span>
<span><span class="co">## Caused by warning in `warn_repr_data_loss()`:</span></span>
<span><span class="co">## ! Date strings including week and excluding weekday can not be fully</span></span>
<span><span class="co">## represented. To avoid loss of datetime resolution, such partial dates</span></span>
<span><span class="co">## are best represented as timespans. See `?timespan`.</span></span>
<span><span class="co">## # A tibble: 15 Ã— 3</span></span>
<span><span class="co">##    dates            parttimes                     imputed_times                 </span></span>
<span><span class="co">##    &lt;chr&gt;            &lt;pttm&gt;                        &lt;pttm&gt;                        </span></span>
<span><span class="co">##  1 &lt;NA&gt;             NA                            NA                            </span></span>
<span><span class="co">##  2 2001             2001                          2001-01-01 00:00:00+-12:00    </span></span>
<span><span class="co">##  3 2002-01-01       2002-01-01                    2002-01-01 00:00:00+-12:00    </span></span>
<span><span class="co">##  4 2004-245         2004-09-01                    2004-09-01 00:00:00+-12:00    </span></span>
<span><span class="co">##  5 2005-W13         2005                          2005-01-01 00:00:00+-12:00    </span></span>
<span><span class="co">##  6 2006-W02-5       2006-01-12                    2006-01-12 00:00:00+-12:00    </span></span>
<span><span class="co">##  7 2007-10-01T08    2007-10-01 08                 2007-10-01 08:00:00+-12:00    </span></span>
<span><span class="co">##  8 2008-09-20T08:35 2008-09-20 08:35              2008-09-20 08:35:00+-12:00    </span></span>
<span><span class="co">##  9 2009-08-12T08:3â€¦ 2009-08-12 08:35:02.880       2009-08-12 08:35:02.880+-12:00</span></span>
<span><span class="co">## 10 2010-07-22T08:3â€¦ 2010-07-22 08:35:32           2010-07-22 08:35:32+-12:00    </span></span>
<span><span class="co">## 11 2011-06-13T08:3â€¦ 2011-06-13 08:35:32.123       2011-06-13 08:35:32.123+-12:00</span></span>
<span><span class="co">## 12 2012-05-23T08:3â€¦ 2012-05-23 08:35:32.123-00:00 2012-05-23 08:35:32.123-00:00 </span></span>
<span><span class="co">## 13 2013-04-14T08:3â€¦ 2013-04-14 08:35:32.123+05:00 2013-04-14 08:35:32.123+05:00 </span></span>
<span><span class="co">## 14 2014-03-24T08:3â€¦ 2014-03-24 08:35:32.123+05:30 2014-03-24 08:35:32.123+05:30 </span></span>
<span><span class="co">## 15 20150101T083532â€¦ 2015-01-01 08:35:32.123+05:30 2015-01-01 08:35:32.123+05:30</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="roadmap">Roadmap<a class="anchor" aria-label="anchor" href="#roadmap"></a>
</h1>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The <code>partial_time</code> class is pretty complete. The <code>timespan</code> and <code>partial_difftime</code> classes are still under construction!</p>
</div>
<div class="section level2">
<h2 id="in-development-construction">In-development <span class="emoji" data-emoji="construction">ğŸš§</span>
<a class="anchor" aria-label="anchor" href="#in-development-construction"></a>
</h2>
<table class="table">
<colgroup>
<col width="20%">
<col width="16%">
<col width="39%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th>status</th>
<th>class</th>
<th>function/op</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>parttime</code></td>
<td>create <code>partial_time</code>
</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>as.parttime</code></td>
<td>cast to <code>partial_time</code>
</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td>
<code>&gt;</code>,<code>&lt;</code>,<code>&lt;=</code>,<code>&gt;=</code>
</td>
<td>comparison operators</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td>
<code>possibly</code>,<code>definitely</code>
</td>
<td>uncertainty resolvers</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td>
<code>==</code>,<code>!=</code>
</td>
<td>equivalence operators</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td>
<code>min</code>,<code>max</code>,<code>pmin</code>,<code>pmax</code>
</td>
<td>partial time extremes</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>impute_time</code></td>
<td>imputing partial time</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>to_gmt</code></td>
<td>convert to gmt timezone</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>print</code></td>
<td>printing</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>format</code></td>
<td>format as character</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>&lt;vctrs&gt;</code></td>
<td>misc <code>vctrs</code> functions</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="ballot_box_with_check">â˜‘ï¸</span></td>
<td><code>partial_time</code></td>
<td><code>&lt;pillar&gt;</code></td>
<td>misc <code>pillar</code> functions</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td><code>difftime</code></td>
<td>create <code>partial_difftime</code>
</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td><code>as.difftime</code></td>
<td>cast to <code>partial_difftime</code>
</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td>
<code>&gt;</code>,<code>&lt;</code>,<code>&lt;=</code>,<code>&gt;=</code>
</td>
<td>comparison operators</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td>
<code>possibly</code>,<code>definitely</code>
</td>
<td>uncertainty resolvers</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td>
<code>==</code>,<code>!=</code>
</td>
<td>equivalence operators</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td>
<code>min</code>,<code>max</code>,<code>pmin</code>,<code>pmax</code>
</td>
<td>partial difftime extremes</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td><code>print</code></td>
<td>printing</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td><code>format</code></td>
<td>format as character</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td><code>&lt;vctrs&gt;</code></td>
<td>misc <code>vctrs</code> functions</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td><code>partial_difftime</code></td>
<td><code>&lt;pillar&gt;</code></td>
<td>misc <code>pillar</code> functions</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td></td>
<td><code>`-`(partial_time, partial_difftime)</code></td>
<td>subraction</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td></td>
<td><code>`-`(partial_time, partial_time)</code></td>
<td>subraction</td>
</tr>
<tr class="odd">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td></td>
<td><code>`-`(partial_difftime, partial_difftime)</code></td>
<td>subraction</td>
</tr>
<tr class="even">
<td><span class="emoji" data-emoji="black_square_button">ğŸ”²</span></td>
<td></td>
<td><code>`-`(partial_difftime, partial_difftime)</code></td>
<td>addition</td>
</tr>
</tbody>
</table>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=parttime" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/dgkf/parttime/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/dgkf/parttime/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing parttime</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Doug Kelkhoff <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=parttime" class="external-link"><img src="https://img.shields.io/cran/v/parttime.svg" alt="CRAN"></a></li>
<li><a href="https://github.com/dgkf/parttime/actions" class="external-link"><img src="https://github.com/dgkf/parttime/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/dgkf/parttime?branch=main" class="external-link"><img src="https://codecov.io/gh/dgkf/parttime/branch/main/graph/badge.svg" alt="Coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Doug Kelkhoff.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
